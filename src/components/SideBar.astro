---
import Logo from "../assets/Logo.astro";
import MenuIcon from "../assets/MenuIcon.astro"; 
import menu from "../config/menu.json";

// check if menu item is active
const isMenuItemActive = (url: string) => {
  const pathname = Astro.url.pathname;
  if (url === "/") {
    return pathname === url ? "active" : "";
  }
  return pathname.startsWith(url) ? "active" : "";
};
---

<!-- Sidebar toggle -->
<input type="checkbox" id="sidebar-toggle" class="peer hidden" />
<label for="sidebar-toggle" class="cursor-pointer p-4 flex items-center gap-2" aria-label="Abrir menú lateral">
  <span class="text-xl text-teal-900 font-extrabold">Menu</span>
  <MenuIcon />
</label>

<!-- Sidebar -->
<aside class="fixed top-0 left-0 h-full w-74 font-extralight bg-[#ffe9c7] text-2xl shadow-lg transform -translate-x-full peer-checked:translate-x-0 transition-transform z-50" aria-label="Menú lateral">
  <nav class="p-6 flex flex-col space-y-4 h-full" role="navigation">
    <!-- Botón X -->
    <label for="sidebar-toggle" class="absolute top-[34px] right-3 cursor-pointer text-black hover:text-gray-700 text-4xl" aria-label="Cerrar menú lateral">
      &times;
    </label>
    <div class="flex items-center gap-1 mb-4 border-b border-gray-900 pb-2">
      <Logo href="/" />
      <a href="/" class="text-xl text-teal-900 font-extrabold">PiyataShop</a>
    </div>
    <ul class="flex-1 flex flex-col gap-2" role="menu">
      {menu.main.map((menuItem) => (
        <li role="none">
          <a
            href={menuItem.url}
            role="menuitem"
            class:list={[
              "w-auto my-2 text-lg text-teal-900 font-extrabold mx-4 rounded hover:text-teal-800",
              isMenuItemActive(menuItem.url) && "text-teal-300 cursor-pointer",
            ]}
          >
           - {menuItem.name}
          </a>
        </li>
      ))}
    </ul>
  </nav>
</aside>